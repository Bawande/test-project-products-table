!function a(r,i,o){function s(t,e){if(!i[t]){if(!r[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(l)return l(t,!0);throw(e=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",e}n=i[t]={exports:{}},r[t][0].call(n.exports,function(e){return s(r[t][1][e]||e)},n,n.exports,a,r,i,o)}return i[t].exports}for(var l="function"==typeof require&&require,e=0;e<o.length;e++)s(o[e]);return s}({1:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.tableColumns=n.resultTableList=n.products=void 0;n.products=[{id:1,shortName:"Мраморный щебень 1",longName:"Мраморный щебень фр. 2-5 мм, 25кг",price:1231,quantity:12,total:1231,weight:3,"shippingСost":300,maxCapacity:2400,isDeleted:!1},{id:2,shortName:"Мраморный щебень 2",longName:"Мраморный щебень фр. 2-5 мм, 25кг",price:1331,quantity:15,total:1331,weight:3,"shippingСost":300,maxCapacity:2400,isDeleted:!0},{id:3,shortName:"Мраморный щебень 3",longName:"Мраморный щебень фр. 2-5 мм, 25кг",price:1431,quantity:17,total:1431,weight:3,"shippingСost":300,maxCapacity:2400,isDeleted:!1},{id:4,shortName:"Мраморный щебень 4",longName:"Мраморный щебень фр. 2-5 мм, 25кг",price:1531,quantity:13,total:1531,weight:3,"shippingСost":300,maxCapacity:2400,isDeleted:!1},{id:5,shortName:"Мраморный щебень 5",longName:"Мраморный щебень фр. 2-5 мм, 25кг",price:1251,quantity:14,total:1251,weight:3,"shippingСost":300,maxCapacity:2400,isDeleted:!1},{id:6,shortName:"Мраморный щебень 6",longName:"Мраморный щебень фр. 2-5 мм, 25кг",price:1371,quantity:18,total:1371,weight:3,"shippingСost":300,maxCapacity:2400,isDeleted:!1},{id:7,shortName:"Мраморный щебень 7",longName:"Мраморный щебень фр. 2-5 мм, 25кг",price:1351,quantity:9,total:1351,weight:3,"shippingСost":300,maxCapacity:2400,isDeleted:!1}],n.tableColumns=[{id:0,key:"index",type:"SYSTEM",columnOptions:{title:"Номер",lable:"Номер",validated:"",width:"48px",isAutocomplete:!1,isDisplay:!0,isAlwaysVisible:!0,isResize:!1,isDraggable:!1,isEditable:!1,mediaQuery:["desktop"]}},{id:1,key:"action",type:"SYSTEM",columnOptions:{title:"Д",lable:"Действие",validated:"",width:"22px",isAutocomplete:!1,isDisplay:!0,isAlwaysVisible:!0,isResize:!1,isDraggable:!1,isEditable:!1,mediaQuery:["desktop","tablet","mobile"]}},{id:3,key:"longName",type:"DATA",columnOptions:{title:"Наименование еденицы",lable:"Наименование еденицы",validated:"text",width:2.85,isAutocomplete:!0,isDisplay:!0,isAlwaysVisible:!0,isResize:!0,isDraggable:!0,isEditable:!0,mediaQuery:["desktop","tablet","mobile"]}},{id:4,key:"price",type:"DATA",columnOptions:{title:"Цена",lable:"Цена",validated:"number",width:1,isAutocomplete:!1,isDisplay:!0,isAlwaysVisible:!0,isResize:!0,isDraggable:!0,isEditable:!0,mediaQuery:["desktop","tablet","mobile"]}},{id:5,key:"quantity",type:"DATA",columnOptions:{title:"Кол-во",lable:"Кол-во",validated:"number",width:1,isAutocomplete:!1,isDisplay:!0,isAlwaysVisible:!0,isResize:!0,isDraggable:!0,isEditable:!0,mediaQuery:["desktop","tablet","mobile"]}},{id:6,key:"shortName",type:"DATA",columnOptions:{title:"Название товара",lable:"Название товара",validated:"text",width:"10%",isAutocomplete:!0,isDisplay:!0,isAlwaysVisible:!1,isResize:!0,isDraggable:!0,isEditable:!0,mediaQuery:["desktop","tablet","mobile"]}},{id:10,key:"weight",type:"DATA",columnOptions:{title:"Вес",lable:"Вес",validated:"",width:.63,isAutocomplete:!1,isDisplay:!1,isAlwaysVisible:!1,isResize:!0,isDraggable:!0,isEditable:!0,mediaQuery:["desktop","tablet","mobile"]}},{id:8,key:"shippingСost",type:"DATA",columnOptions:{title:"Цена доставки, руб",lable:"Цена доставки, руб",validated:"number",width:"10%",isAutocomplete:!1,isDisplay:!1,isAlwaysVisible:!1,isResize:!0,isDraggable:!0,isEditable:!1,mediaQuery:["desktop","tablet","mobile"]}},{id:9,key:"maxCapacity",type:"DATA",columnOptions:{title:"Max грузоподъемность, кг",lable:"Max грузоподъемность, кг",validated:"number",width:1,isAutocomplete:!1,isDisplay:!1,isAlwaysVisible:!1,isResize:!0,isDraggable:!0,isEditable:!0,mediaQuery:["desktop","tablet","mobile"]}},{id:7,key:"total",type:"DATA",columnOptions:{title:"Итого",lable:"Итого",validated:"",width:.63,isAutocomplete:!1,isDisplay:!0,isAlwaysVisible:!0,isResize:!0,isDraggable:!1,isEditable:!0,mediaQuery:["desktop","tablet","mobile"]}}];n.resultTableList=[{id:0,key:"sum",label:"Сумма",unit:"руб",countKey:"total",list:"general",result:null},{id:1,key:"quantity",label:"Кол-во",unit:"шт",countKey:"quantity",list:"general",result:null},{id:2,key:"total_weight",label:"Общий вес",unit:"кг",countKey:"weight",list:"general",result:null},{id:3,key:"total_sum",label:"Общая сумма",unit:"руб",countKey:"total",list:"resulting",result:null}]},{}],2:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=a(e("./lib/HeaderTable")),i=a(e("./lib/RowsTable")),o=a(e("./lib/ResultTable")),s=a(e("./lib/ContextMenu")),l=a(e("./lib/ToolsTableMenu")),c=e("./helpers/slowDownEvents"),u=e("../data/allData"),d=e("./helpers/server");function a(e){return e&&e.__esModule?e:{default:e}}function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,i,o,s=[],l=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(a=i.call(n)).done)&&(s.push(a.value),s.length!==t);l=!0);}catch(e){c=!0,r=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw r}}return s}}(e,t)||function(e,t){var n;if(e)return"string"==typeof e?f(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function m(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!==h(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!==h(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===h(e)?e:String(e)}(a.key),a)}}e=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.options=Object.assign(e||{},{selectorTable:"id-table",selectorToolbar:"id-toolbar",selectorContextMenu:"id-context-menu",selectorResultTable:"id-result-table",classParrentTable:"table-wrapper",classTable:"table",debag:!0}),this.options.initTableWidth="99%",this.data={},this.data.dataProducts={},this.data.optionDataTable={},this.data.optionTotalTable={},this.data.isNewData=!1,this.nodes={},this.nodes.$tableParent=void 0,this.nodes.$contextMenuParent=void 0,this.nodes.$totalTable=void 0,this.nodes.$toolbar=void 0,this.initParentNodes(),this.nodes.$table=void 0,this.nodes.$tableHeader=void 0,this.nodes.$tableBody=void 0,this.getDataProducts=this.getDataProducts.bind(this),this.setDataProducts=this.setDataProducts.bind(this),this.getOptionDataTable=this.getOptionDataTable.bind(this),this.setOptionDataTable=this.setOptionDataTable.bind(this),this.getOptionsResultTable=this.getOptionsResultTable.bind(this),this.setOptionsResultTable=this.setOptionsResultTable.bind(this),this.setServerDataProducts=this.setServerDataProducts.bind(this),this.renderTable=this.renderTable.bind(this),this.renderResult=this.renderResult.bind(this),this.createNewRows=this.createNewRows.bind(this),this.saveChanges=this.saveChanges.bind(this),this.getIsNewData=this.getIsNewData.bind(this),this.setIsNewData=this.setIsNewData.bind(this),this.getMediaQuery=this.getMediaQuery.bind(this),this.createTable(),this.initData()}var e,n,a;return e=t,(n=[{key:"initData",value:function(){var a=this;Promise.all([(0,d.getServerAllProducts)(),(0,d.getServerOptionsDataTable)(),(0,d.getServerOptionsResultTable)()]).then(function(e){var e=p(e,3),t=e[0],n=e[1],e=e[2];a.setDataProducts(t),a.setOptionDataTable(n),a.setOptionsResultTable(e)}).catch(function(e){a.setDataProducts(u.products),a.setOptionDataTable(u.tableColumns),a.setOptionsResultTable(u.resultTableList)}).then(function(){a.initComponents()}).then(function(){window.addEventListener("resize",(0,c.throttle)(a.renderTable,60)),a.render()})}},{key:"initComponents",value:function(){this.contextMenu=new s.default({parentBlock:this.nodes.$contextMenuParent,getOptionDataTable:this.getOptionDataTable,setOptionDataTable:this.setOptionDataTable,renderTable:this.renderTable,getMediaQuery:this.getMediaQuery}),this.headerTable=new r.default({parentBlock:this.nodes.$tableHeader,getOptionDataTable:this.getOptionDataTable,setOptionDataTable:this.setOptionDataTable,renderTable:this.renderTable,getMediaQuery:this.getMediaQuery}),this.rowsTable=new i.default({parentBlock:this.nodes.$tableBody,getDataProducts:this.getDataProducts,setDataProducts:this.setDataProducts,getOptionDataTable:this.getOptionDataTable,setIsNewData:this.setIsNewData,setServerDataProducts:this.setServerDataProducts,getMediaQuery:this.getMediaQuery,renderResult:this.renderResult}),this.toolsTableMenu=new l.default({parentBlock:this.nodes.$toolbar,createNewRows:this.createNewRows,saveChanges:this.saveChanges,getIsNewData:this.getIsNewData}),this.resultTable=new o.default({parentBlock:this.nodes.$totalTable,getDataProducts:this.getDataProducts,getOptionsResultTable:this.getOptionsResultTable})}},{key:"initParentNodes",value:function(){var e=this.options,t=e.selectorTable,n=e.selectorContextMenu,a=e.selectorResultTable,e=e.selectorToolbar;this.nodes.$tableParent=document.getElementById(t),this.nodes.$contextMenuParent=document.getElementById(n),this.nodes.$contextMenuParent.style.position="relative",this.nodes.$totalTable=document.getElementById(a),this.nodes.$toolbar=document.getElementById(e)}},{key:"render",value:function(){this.renderTable(),this.contextMenu.render(),this.toolsTableMenu.render()}},{key:"renderTable",value:function(){this.headerTable.render(),this.rowsTable.render(),this.resultTable.render()}},{key:"renderResult",value:function(){this.resultTable.render()}},{key:"getOptionDataTable",value:function(){return JSON.parse(JSON.stringify(this.data.optionDataTable))}},{key:"getOptionsResultTable",value:function(){return JSON.parse(JSON.stringify(this.data.optionTotalTable))}},{key:"getDataProducts",value:function(){return JSON.parse(JSON.stringify(this.data.dataProducts))}},{key:"getIsNewData",value:function(){return this.data.isNewData}},{key:"getMediaQuery",value:function(){var e="desktop";return window.matchMedia("(max-width: 768px)").matches&&(e="tablet"),e=window.matchMedia("(max-width: 480px)").matches?"mobile":e}},{key:"setOptionsResultTable",value:function(e){Array.isArray(e)&&(this.data.optionTotalTable=e)}},{key:"setDataProducts",value:function(e){Array.isArray(e)&&(this.data.dataProducts=JSON.parse(JSON.stringify(e)))}},{key:"setServerDataProducts",value:function(t,e){var n=this;Array.isArray(t)&&(0,d.setServerAllProducts)(t).then(function(e){return e.json()}).then(function(e){n.setDataProducts(t),n.setIsNewData(!1),n.renderTable()}).catch(function(e){})}},{key:"setOptionDataTable",value:function(e){Array.isArray(e)&&(this.data.optionDataTable=JSON.parse(JSON.stringify(e)))}},{key:"setIsNewData",value:function(e){"boolean"==typeof e&&(this.data.isNewData=e,this.toolsTableMenu.render())}},{key:"createNewRows",value:function(){this.rowsTable.addNewRows()}},{key:"createTable",value:function(){var e=this.nodes.$tableParent,t=this.options,n=t.classParrentTable,a=t.classTable,t=t.initTableWidth;e&&(e.innerHTML="",e.classList=n,(n=document.createElement("table")).id="id-testing-table",n.className=a,n.className=a,n.style.tableLayout="fixed",n.style.width=t,e.appendChild(n),this.nodes.$table=n,a=document.createElement("thead"),n.appendChild(a),this.nodes.$tableHeader=a,t=document.createElement("tbody"),n.appendChild(t),this.nodes.$tableBody=t)}},{key:"saveChanges",value:function(){this.rowsTable.saveChangeRows()}}])&&m(e.prototype,n),a&&m(e,a),Object.defineProperty(e,"prototype",{writable:!1}),t}();n.default=e},{"../data/allData":1,"./helpers/server":4,"./helpers/slowDownEvents":5,"./lib/ContextMenu":6,"./lib/HeaderTable":7,"./lib/ResultTable":8,"./lib/RowsTable":9,"./lib/ToolsTableMenu":10}],3:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,n.default=function(s,l){var c,u="table-body__autocomplete-wrapper",d="table-body__autocomplete-list",h="table-body__autocomplete-item",a="active",p=s.dataset.dataId;function t(e){f()}function n(e){var t=e.target.value;if(f(),!t.trim())return!1;c=-1;var n=document.createElement("div"),a=(n.classList=u,n.style.position="absolute",n.style.display="none",n.style.zIndex="999",e.target.parentNode.appendChild(n),document.createElement("ul"));a.id=p,a.classList=d,a.style.width="".concat(s.getBoundingClientRect().width,"px"),n.appendChild(a);for(var r=0;r<l.length;r+=1){var i,o=l[r];o.substr(0,t.length).toUpperCase()===t.toUpperCase()&&(n.style.display="",(i=document.createElement("li")).classList=h,i.innerHTML="<strong>".concat(o.substr(0,t.length),"</strong>"),i.innerHTML+=o.substr(t.length),i.innerHTML+="<input type='hidden' value='".concat(o,"'>"),i.addEventListener("click",function(e){s.value=e.currentTarget.getElementsByTagName("input")[0].value,f()}),a.appendChild(i))}}function r(e){var t=(t=document.getElementById(p))&&t.getElementsByTagName("li");40===e.keyCode?(e.preventDefault(),c+=1,i(t)):38===e.keyCode?(--c,i(t)):13===e.keyCode?-1<c&&t&&t[c].click():9!==e.keyCode&&27!==e.keyCode||f()}function i(e){if(e){for(var t=e,n=0;n<t.length;n+=1)t[n].classList.remove(a);e[c=(c=c>=e.length?0:c)<0?e.length-1:c].classList.add(a),e[c].scrollIntoView()}}function f(e){for(var t=document.getElementsByClassName(u),n=0;n<t.length;n+=1)e!==t[n]&&e!==s&&t[n].parentNode.removeChild(t[n])}s.addEventListener("focus",function(e){s.addEventListener("input",n),s.addEventListener("keydown",r),document.addEventListener("scroll",t)}),s.addEventListener("blur",function(e){s.removeEventListener("input",n),s.removeEventListener("keydown",r),document.removeEventListener("scroll",t)}),document.addEventListener("click",function(e){f(e.target)})}},{}],4:[function(e,t,n){"use strict";function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function C(){C=function(){return o};var o={},e=Object.prototype,l=e.hasOwnProperty,c=Object.defineProperty||function(e,t,n){e[t]=n.value},t="function"==typeof Symbol?Symbol:{},a=t.iterator||"@@iterator",n=t.asyncIterator||"@@asyncIterator",r=t.toStringTag||"@@toStringTag";function i(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{i({},"")}catch(e){i=function(e,t,n){return e[t]=n}}function s(e,t,n,a){var r,i,o,s,t=t&&t.prototype instanceof h?t:h,t=Object.create(t.prototype),a=new k(a||[]);return c(t,"_invoke",{value:(r=e,i=n,o=a,s="suspendedStart",function(e,t){if("executing"===s)throw new Error("Generator is already running");if("completed"===s){if("throw"===e)throw t;return D()}for(o.method=e,o.arg=t;;){var n=o.delegate;if(n){n=function e(t,n){var a=n.method,r=t.iterator[a];if(void 0===r)return n.delegate=null,"throw"===a&&t.iterator.return&&(n.method="return",n.arg=void 0,e(t,n),"throw"===n.method)||"return"!==a&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+a+"' method")),d;a=u(r,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,d;r=a.arg;return r?r.done?(n[t.resultName]=r.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=void 0),n.delegate=null,d):r:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,d)}(n,o);if(n){if(n===d)continue;return n}}if("next"===o.method)o.sent=o._sent=o.arg;else if("throw"===o.method){if("suspendedStart"===s)throw s="completed",o.arg;o.dispatchException(o.arg)}else"return"===o.method&&o.abrupt("return",o.arg);s="executing";n=u(r,i,o);if("normal"===n.type){if(s=o.done?"completed":"suspendedYield",n.arg===d)continue;return{value:n.arg,done:o.done}}"throw"===n.type&&(s="completed",o.method="throw",o.arg=n.arg)}})}),t}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}o.wrap=s;var d={};function h(){}function p(){}function f(){}var t={},m=(i(t,a,function(){return this}),Object.getPrototypeOf),m=m&&m(m(T([]))),y=(m&&m!==e&&l.call(m,a)&&(t=m),f.prototype=h.prototype=Object.create(t));function b(e){["next","throw","return"].forEach(function(t){i(e,t,function(e){return this._invoke(t,e)})})}function v(o,s){var t;c(this,"_invoke",{value:function(n,a){function e(){return new s(function(e,t){!function t(e,n,a,r){var i,e=u(o[e],o,n);if("throw"!==e.type)return(n=(i=e.arg).value)&&"object"==O(n)&&l.call(n,"__await")?s.resolve(n.__await).then(function(e){t("next",e,a,r)},function(e){t("throw",e,a,r)}):s.resolve(n).then(function(e){i.value=e,a(i)},function(e){return t("throw",e,a,r)});r(e.arg)}(n,a,e,t)})}return t=t?t.then(e,e):e()}})}function g(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function w(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(g,this),this.reset(!0)}function T(t){if(t){var n,e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return n=-1,(e=function e(){for(;++n<t.length;)if(l.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e}).next=e}return{next:D}}function D(){return{value:void 0,done:!0}}return c(y,"constructor",{value:p.prototype=f,configurable:!0}),c(f,"constructor",{value:p,configurable:!0}),p.displayName=i(f,r,"GeneratorFunction"),o.isGeneratorFunction=function(e){e="function"==typeof e&&e.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},o.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,i(e,r,"GeneratorFunction")),e.prototype=Object.create(y),e},o.awrap=function(e){return{__await:e}},b(v.prototype),i(v.prototype,n,function(){return this}),o.AsyncIterator=v,o.async=function(e,t,n,a,r){void 0===r&&(r=Promise);var i=new v(s(e,t,n,a),r);return o.isGeneratorFunction(t)?i:i.next().then(function(e){return e.done?e.value:i.next()})},b(y),i(y,r,"Generator"),i(y,a,function(){return this}),i(y,"toString",function(){return"[object Generator]"}),o.keys=function(e){var t,n=Object(e),a=[];for(t in n)a.push(t);return a.reverse(),function e(){for(;a.length;){var t=a.pop();if(t in n)return e.value=t,e.done=!1,e}return e.done=!0,e}},o.values=T,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!e)for(var t in this)"t"===t.charAt(0)&&l.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var a=this;function e(e,t){return i.type="throw",i.arg=n,a.next=e,t&&(a.method="next",a.arg=void 0),!!t}for(var t=this.tryEntries.length-1;0<=t;--t){var r=this.tryEntries[t],i=r.completion;if("root"===r.tryLoc)return e("end");if(r.tryLoc<=this.prev){var o=l.call(r,"catchLoc"),s=l.call(r,"finallyLoc");if(o&&s){if(this.prev<r.catchLoc)return e(r.catchLoc,!0);if(this.prev<r.finallyLoc)return e(r.finallyLoc)}else if(o){if(this.prev<r.catchLoc)return e(r.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return e(r.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;0<=n;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&l.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var r=a;break}}var i=(r=r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc?null:r)?r.completion:{};return i.type=e,i.arg=t,r?(this.method="next",this.next=r.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),w(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n,a,r=this.tryEntries[t];if(r.tryLoc===e)return"throw"===(n=r.completion).type&&(a=n.arg,w(r)),a}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:T(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},o}function l(e,t,n,a,r,i,o){try{var s=e[i](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(a,r)}function a(s){return function(){var e=this,o=arguments;return new Promise(function(t,n){var a=s.apply(e,o);function r(e){l(a,t,n,r,i,"next",e)}function i(e){l(a,t,n,r,i,"throw",e)}r(void 0)})}}function r(){return(r=a(C().mark(function e(){var t;return C().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("../data/dataProducts.json");case 2:return t=e.sent,e.next=5,t.json();case 5:return t=e.sent,e.abrupt("return",t);case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function i(){return(i=a(C().mark(function e(){var t;return C().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("../data/optionsDataTable.json");case 2:return t=e.sent,e.next=5,t.json();case 5:return t=e.sent,e.abrupt("return",t);case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function o(){return(o=a(C().mark(function e(){var t;return C().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("../data/optionsResultTable.json");case 2:return t=e.sent,e.next=5,t.json();case 5:return t=e.sent,e.abrupt("return",t);case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function s(){return(s=a(C().mark(function e(t){var n;return C().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://jsonplaceholder.typicode.com/posts",{method:"POST",body:JSON.stringify(t),headers:{"Content-type":"application/json; charset=UTF-8"}});case 2:return n=e.sent,e.next=5,n;case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}Object.defineProperty(n,"__esModule",{value:!0}),n.getServerAllProducts=function(){return r.apply(this,arguments)},n.getServerOptionsDataTable=function(){return i.apply(this,arguments)},n.getServerOptionsResultTable=function(){return o.apply(this,arguments)},n.setServerAllProducts=function(e){return s.apply(this,arguments)}},{}],5:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.debounce=function(a,r,i){var o;return function(){var e=this,t=arguments,n=i&&!o;clearTimeout(o),o=setTimeout(function(){o=null,i||a.apply(e,t)},r),n&&a.apply(e,t)}},n.throttle=void 0;n.throttle=function(n,a){var r=!1;return function(){var e,t;r||(e=this,t=arguments,r=!0,setTimeout(function(){n.apply(e,t),r=!1},a))}}},{}],6:[function(e,t,n){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(t,e){var n,a=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,n)),a}function o(a){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?i(Object(r),!0).forEach(function(e){var t,n;t=a,n=r[e=e],(e=s(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach(function(e){Object.defineProperty(a,e,Object.getOwnPropertyDescriptor(r,e))})}return a}function r(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,s(a.key),a)}}function s(e){e=function(e,t){if("object"!==a(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!==a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===a(e)?e:String(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var l=function(){function i(e){if(!(this instanceof i))throw new TypeError("Cannot call a class as a function");var t=e.parentBlock,n=e.getOptionDataTable,a=e.setOptionDataTable,r=e.renderTable,e=e.getMediaQuery;this.options=Object.assign({classParent:"context-menu",classButtonMenu:"context-menu__toggle",classMenuList:"context-menu__list",classMenuItem:"context-menu__item",classSubMenu:"context-menu__sublist",classTitleSubMenu:"context-menu__title-sublist",classTitleCheckbox:"context-menu__checkbox"}),Object.assign(this,{parentBlock:t,getOptionDataTable:n,setOptionDataTable:a,renderTable:r,getMediaQuery:e}),this.menuItems=[{id:0,key:"columns",lable:"Отображение столбцов",items:this.getOptionDataTable()}],this.node={},this.node.$menuList=void 0,this.node.$menuButtonToggler=void 0,this.handlerToggleMenu=this.handlerToggleMenu.bind(this),this.handlerMouseEnterMenuItem=this.handlerMouseEnterMenuItem.bind(this),this.hendlerOutsideClickEvent=this.hendlerOutsideClickEvent.bind(this),this.handlerChangeCheckbox=this.handlerChangeCheckbox.bind(this)}var e,t,n;return e=i,(t=[{key:"render",value:function(){"desktop"!==this.getMediaQuery()?this.сlearParentBlock():this.checkData()&&this.checkParent()&&(this.сlearParentBlock(),this.create())}},{key:"checkParent",value:function(){return!!(this.parentBlock&&this.parentBlock instanceof HTMLElement)}},{key:"checkData",value:function(){return!(!Array.isArray(this.getOptionDataTable())||0===this.getOptionDataTable().length)}},{key:"сlearParentBlock",value:function(){this.parentBlock.hasChildNodes()&&(this.parentBlock.innerHTML="")}},{key:"create",value:function(){var e=this.options.classParent;this.parentBlock.classList.add(e),this.createToggleButton(),this.createMenu()}},{key:"createToggleButton",value:function(){var e=this,t=this.options.classButtonMenu,n=document.createElement("button");n.className=t,this.parentBlock.appendChild(n),this.node.$menuButtonToggler=n,setTimeout(function(){n.addEventListener("click",e.handlerToggleMenu)},0)}},{key:"createMenu",value:function(){var l=this,e=this.options,t=e.classMenuList,i=e.classSubMenu,c=e.classMenuItem,o=e.classTitleSubMenu,u=e.classTitleCheckbox,e=this.menuItems,n=document.createElement("ul"),d=(n.className=t,n.style.position="absolute",n.style.display="none",this.node.$menuList=n,this.parentBlock.appendChild(n),document.createDocumentFragment());[].forEach.call(e,function(e){var t,s,n=e.lable,e=e.items,a=document.createElement("li"),r=(a.className="".concat(c," drop-down"),a.addEventListener("mouseenter",l.handlerMouseEnterMenuItem),document.createElement("span"));r.innerText=n,a.appendChild(r),Array.isArray(e)&&((r=document.createElement("ul")).className=i,r.style.position="absolute",r.style.display="none",a.appendChild(r),(t=document.createElement("div")).className=o,t.innerText=n,r.appendChild(t),s=document.createDocumentFragment(),[].forEach.call(e,function(e){var t,n=e.id,a=e.key,r=e.type,e=e.columnOptions,i=e.lable,o=e.isDisplay;e.isAlwaysVisible||"DATA"!==r||((e=document.createElement("li")).className=c,r=document.createElement("div"),e.appendChild(r),(t=document.createElement("input")).type="checkbox",t.name=a,t.className=u,t.value=i,t.checked=o,t.id="id-".concat(a,"-").concat(n),t.dataset.columnId=n,r.appendChild(t),t.addEventListener("change",l.handlerChangeCheckbox),(o=document.createElement("label")).htmlFor="id-".concat(a,"-").concat(n),r.appendChild(o),t=document.createTextNode(i),o.appendChild(t),s.appendChild(e))}),r.appendChild(s)),d.appendChild(a)}),n.appendChild(d)}},{key:"openMenuList",value:function(){var e=this,t=this.node,n=t.$menuList,t=t.$menuButtonToggler;n.style.display="",n.classList.add("open"),t.classList.add("open"),setTimeout(function(){document.addEventListener("click",e.hendlerOutsideClickEvent)},0)}},{key:"closeMenuList",value:function(){var e=this.node,t=e.$menuList,e=e.$menuButtonToggler;t.style.display="none",t.classList.remove("open"),e.classList.remove("open"),document.removeEventListener("click",this.hendlerOutsideClickEvent)}},{key:"handlerToggleMenu",value:function(e){e.target.classList.contains("open")?this.closeMenuList():this.openMenuList()}},{key:"handlerMouseEnterMenuItem",value:function(e){function t(){a.style.display="none",n.removeEventListener("mouseleave",t)}var n=e.target,a=n.querySelector("ul");a.style.display="",n.addEventListener("mouseleave",t)}},{key:"hendlerOutsideClickEvent",value:function(e){var t=this.node.$menuList,e=e.target;t.classList.contains("open")&&!t.contains(e)&&(this.closeMenuList(),document.removeEventListener("click",this.hendlerOutsideClickEvent))}},{key:"handlerChangeCheckbox",value:function(e){var t=this,n=this.getOptionDataTable(),e=e.target,a=e.dataset.columnId,r=e.checked,i=[].map.call(n,function(e){return e.id===Number(a)?o(o({},e),{},{columnOptions:o(o({},e.columnOptions),{},{isDisplay:r})}):e});setTimeout(function(){t.setOptionDataTable(i),t.renderTable()},0)}},{key:"destroy",value:function(){}}])&&r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();n.default=l},{}],7:[function(e,t,n){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(t,e){var n,a=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,n)),a}function s(a){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?i(Object(r),!0).forEach(function(e){var t,n;t=a,n=r[e=e],(e=o(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach(function(e){Object.defineProperty(a,e,Object.getOwnPropertyDescriptor(r,e))})}return a}function r(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,o(a.key),a)}}function o(e){e=function(e,t){if("object"!==a(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!==a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===a(e)?e:String(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var l=function(){function o(e){if(!(this instanceof o))throw new TypeError("Cannot call a class as a function");var t=e.parentBlock,n=e.getOptionDataTable,a=e.setOptionDataTable,r=e.callData,i=e.renderTable,e=e.getMediaQuery;Object.assign(this,{parentBlock:t,getOptionDataTable:n,setOptionDataTable:a,callData:r,renderTable:i,getMediaQuery:e}),this.options=Object.assign({classParent:"table-header",classHeaderRow:"table-header__row",classHeaderColumn:"table-header__column",classHeaderContent:"table-header__content",classColumnResizer:"table-header__resizer",minWidthColumn:70}),this.options.tableWidth=null,this.options.totalShowColumns=null,this.options.sizeColumns=[],this.node={},this.dataOptionTable=[],this.dragColumn=!1,this.dragCurentColumn=void 0,this.handlerColumnMouseEnter=this.handlerColumnMouseEnter.bind(this),this.handlerColumnDragStart=this.handlerColumnDragStart.bind(this),this.handlerColumnDragLeave=this.handlerColumnDragLeave.bind(this),this.handlerColumnDragEnd=this.handlerColumnDragEnd.bind(this),this.handlerColumnDragOver=this.handlerColumnDragOver.bind(this),this.handlerColumnDrop=this.handlerColumnDrop.bind(this)}var e,t,n;return e=o,(t=[{key:"render",value:function(){"desktop"!==this.getMediaQuery()?this.сlearParentBlock():(this.dataOptionTable=this.getOptionDataTable(),this.checkData()&&this.checkParent()&&(this.сlearParentBlock(),this.tableOptionsCalculator(),this.create()))}},{key:"tableOptionsCalculator",value:function(){var e=this.parentBlock,t=this.dataOptionTable,n=this.options.minWidthColumn;function a(e,t){return t=Math.pow(10,t),Math.ceil(e*t)/t}var r=e.getBoundingClientRect().width,i=[],e=(i.areeWidth=r,i.part=0,[].reduce.call(t,function(e,t){return t.columnOptions.isDisplay?(i.push({id:t.id,width:t.columnOptions.width,fixid:"string"==typeof t.columnOptions.width}),"string"!=typeof t.columnOptions.width&&(i.part+=t.columnOptions.width),e+1):e},i.onePart=0));i.forEach(function(e,t){var n;e.fixid&&("px"===e.width.slice(-2)?(n=Number(e.width.slice(0,-2)),i[t].width=a(+n,2),i.areeWidth-=a(+n,2),i.onePart=a(+i.areeWidth/i.part,2)):"%"===e.width.slice(-1)&&(n=Number(e.width.slice(0,-1)),i[t].width=a(+r*+n/100,2),i.areeWidth-=a(+r*+n/100,2),i.onePart=a(+i.areeWidth/i.part,2)))}),i.forEach(function(e,t){e.fixid||(e=Math.max(n,a(i.onePart*e.width,2)),i[t].width=e)}),this.options.totalShowColumns=e,this.options.tableWidth=r,this.options.sizeColumns=Array.from(i)}},{key:"fixColumnWidth",value:function(){var e=this.options.sizeColumns,n=this.dataOptionTable;[].forEach.call(e,function(t){var e=[].findIndex.call(n,function(e){return e.id===t.id});n[e].columnOptions.width="".concat(t.width,"px")}),this.setOptionDataTable(n)}},{key:"checkParent",value:function(){return!!(this.parentBlock&&this.parentBlock instanceof HTMLElement)}},{key:"checkData",value:function(){return!(!Array.isArray(this.dataOptionTable)||0===this.dataOptionTable.length)}},{key:"сlearParentBlock",value:function(){this.parentBlock.hasChildNodes()&&(this.parentBlock.innerHTML="")}},{key:"create",value:function(){var c=this,e=this.parentBlock,t=this.dataOptionTable,u=this.options.sizeColumns,n=this.options,a=n.classParent,r=n.classHeaderRow,d=n.classHeaderColumn,h=n.classHeaderContent,p=(e.classList.add(a),document.createElement("tr"));p.className=r,e.appendChild(p),t.forEach(function(t,e,n){var a=t.id,r=t.columnOptions,i=r.title,o=r.isDisplay,s=r.isResize,r=r.isDraggable,l=!1;e===n.length-1&&(l=!0),o&&((e=document.createElement("th")).className=d,e.dataset.headerId="".concat(a),n=u.findIndex(function(e){return e.id===a}),e.style.width="".concat(u[n].width,"px"),(o=document.createElement("div")).innerText=i,o.className=h,o.style.whiteSpace="nowrap",o.style.overflow="hidden",o.style.margin="2px",e.appendChild(o),p.appendChild(e),l&&((n=document.createElement("th")).style.width="auto",p.appendChild(n)),s&&c.createResizableColumn(e),r)&&!l&&(e.draggable=!1,o.addEventListener("mouseenter",c.handlerColumnMouseEnter),e.addEventListener("dragstart",function(e){c.handlerColumnDragStart(e,t)}),e.addEventListener("dragend",function(e){c.handlerColumnDragEnd(e)}),e.addEventListener("dragover",function(e){c.handlerColumnDragOver(e)}),e.addEventListener("dragleave",function(e){c.handlerColumnDragLeave(e)}),e.addEventListener("dragenter",function(e){c.handlerColumnDragEnter(e)}),e.addEventListener("drop",function(e){c.handlerColumnDrop(e,t)}))})}},{key:"createResizableColumn",value:function(e){var t=this.options.classColumnResizer,n=e.closest("table"),a=document.createElement("div");a.className=t,e.appendChild(a),this.handlerChangeColumnSize(e,a),a.style.height="".concat(n.offsetHeight,"px"),a.onmouseenter=function(e){a.style.height="".concat(n.offsetHeight,"px")}}},{key:"updateWidthInData",value:function(e,n){var a=this.dataOptionTable,r=Number(e.dataset.headerId);"TH"!==e.tagName&&!r||([].forEach.call(a,function(e,t){e.id===r&&(a[t]=s(s({},e),{},{columnOptions:s(s({},e.columnOptions),{},{width:n})}))}),this.setOptionDataTable(a))}},{key:"handlerChangeColumnSize",value:function(a,e){var r=this,i=0,o=0,s=0,l=a.closest("table").getBoundingClientRect().width;e.addEventListener("mousedown",function(e){i=e.clientX;function t(e){e=e.clientX-i,20<o+e&&o+e<l/2&&(s=o+e,a.style.width="".concat(s,"px"))}function n(){document.removeEventListener("mousemove",t),document.removeEventListener("mouseup",n),r.tableOptionsCalculator(),r.fixColumnWidth(),r.updateWidthInData(a,"".concat(s,"px"))}e=window.getComputedStyle(a);o=parseInt(e.width,10);document.addEventListener("mousemove",t),document.addEventListener("mouseup",n)})}},{key:"handlerColumnMouseEnter",value:function(t){var n=t.target.closest("[data-header-id]");t.target.addEventListener("mouseleave",function e(){n.draggable=!1,t.target.removeEventListener("mouseleave",e)}),n.draggable=!0}},{key:"handlerColumnDragStart",value:function(e,t){setTimeout(function(){e.target.style.opacity="0.3"},100);var n=e.target.closest("thead");[].forEach.call(n.querySelectorAll("[draggable]"),function(e){e.classList.add("drag-overlay-on")}),this.dragColumn=!0,this.dragCurentColumn=t}},{key:"handlerColumnDragEnd",value:function(e){var t=this;this.dragColumn=!1,this.dragCurentColumn=null,e.target.style.display="",e.currentTarget.style.opacity="1",this.dropColumn&&(this.dropColumn=!1,setTimeout(function(){t.renderTable()},0))}},{key:"handlerColumnDragOver",value:function(e){this.dragColumn&&(e.preventDefault(),e.dataTransfer.dropEffect="move")}},{key:"handlerColumnDragEnter",value:function(e){this.dropColumn&&e.currentTarget.classList.add("drag-hover")}},{key:"handlerColumnDragLeave",value:function(e){e.currentTarget.classList.remove("drag-hover")}},{key:"handlerColumnDrop",value:function(e,t){e.preventDefault(),e.currentTarget.classList.remove("drag-hover");var e=this.dataOptionTable,n=this.dragCurentColumn,a=[].findIndex.call(e,function(e){return e.id===t.id}),r=[].findIndex.call(e,function(e){return e.id===n.id}),r=e.splice(r,1)[0];e.splice(a,0,r),this.setOptionDataTable(e),this.dropColumn=!0}},{key:"destroy",value:function(){}}])&&r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}();n.default=l},{}],8:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!==r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===r(e)?e:String(e)}(a.key),a)}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=function(){function a(e){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");var t=e.parentBlock,n=e.getDataProducts,e=e.getOptionsResultTable;Object.assign(this,{parentBlock:t,getDataProducts:n,getOptionsResultTable:e}),this.options=Object.assign({classParent:"result-table",classGeneralList:"result-table__general-list",classGeneralItem:"result-table__general-item",classGeneralLable:"result-table__general-lable",classGeneralTotal:"result-table__general-total",classResultinglList:"result-table__resulting-list",classResultinglItem:"result-table__resulting-item",classResultinglLable:"result-table__resulting-lable",classResultinglTotal:"result-table__resulting-total"}),this.lists={},this.lists.general={},this.lists.general.listClass=this.options.classGeneralList,this.lists.general.itemClass=this.options.classGeneralItem,this.lists.general.lableClass=this.options.classGeneralLable,this.lists.general.totalClass=this.options.classGeneralTotal,this.lists.resulting={},this.lists.resulting.listClass=this.options.classResultinglList,this.lists.resulting.itemClass=this.options.classResultinglItem,this.lists.resulting.lableClass=this.options.classResultinglLable,this.lists.resulting.totalClass=this.options.classResultinglTotal,this.resultTableList=this.getOptionsResultTable(),this.node={},this.createList=this.createList.bind(this)}var e,t,n;return e=a,(t=[{key:"render",value:function(){this.checkData()&&this.checkParent()&&(this.сlearParentBlock(),this.completeTotals(),this.create())}},{key:"checkParent",value:function(){return!!(this.parentBlock&&this.parentBlock instanceof HTMLElement)}},{key:"checkData",value:function(){return!(!Array.isArray(this.getDataProducts())||0===this.getDataProducts().length)}},{key:"сlearParentBlock",value:function(){this.parentBlock.hasChildNodes()&&(this.parentBlock.innerHTML="")}},{key:"create",value:function(){var e=this.parentBlock;e.classList.add(this.options.classParent),e.appendChild(this.createList("general")),e.appendChild(this.createList("resulting")),this.createList()}},{key:"createList",value:function(){var e,i,o,s,t,l,c=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"general";if(this.lists.hasOwnProperty(c))return e=(t=this.lists[c]).listClass,i=t.itemClass,o=t.lableClass,s=t.totalClass,t=this.resultTableList,(l=document.createElement("ul")).className=e,[].forEach.call(t,function(e){var t,n,a,r;e.list===c&&(r=e.label,t=e.unit,e=e.result,(n=document.createElement("li")).className=i,(a=document.createElement("span")).className=o,a.innerText="".concat(r,":"),n.appendChild(a),(r=document.createElement("span")).className=s,r.innerText="".concat(null===e?"N/A":e," ").concat(t),n.appendChild(r),l.appendChild(n))}),l}},{key:"completeTotals",value:function(){var e=this.resultTableList,t=this.getDataProducts();[].forEach.call(e,function(e){var n;e.result=(n=e.countKey,[].reduce.call(t,function(e,t){return{}.hasOwnProperty.call(t,n)&&Number.isFinite(Number(t[n]))&&!t.isDeleted?e+Number(t[n]):e},0))})}},{key:"destroy",value:function(){}}])&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),a}();n.default=a},{}],9:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var c=(e=e("../helpers/autocomplete"))&&e.__esModule?e:{default:e};function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(t,e){var n,a=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,n)),a}function i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach(function(e){o(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function o(e,t,n){return(t=l(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,l(a.key),a)}}function l(e){e=function(e,t){if("object"!==a(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!==a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===a(e)?e:String(e)}e=function(){function l(e){if(!(this instanceof l))throw new TypeError("Cannot call a class as a function");var t=e.parentBlock,n=e.getDataProducts,a=e.getOptionDataTable,r=e.getMediaQuery,i=e.setDataProducts,o=e.setServerDataProducts,s=e.setIsNewData,e=e.renderResult;Object.assign(this,{parentBlock:t,getDataProducts:n,getOptionDataTable:a,getMediaQuery:r,setDataProducts:i,setServerDataProducts:o,setIsNewData:s,renderResult:e}),this.options=Object.assign({maxRows:100,classParent:"table-body",classRow:"table-body__row",classTempRow:"table-body__temp-row",classTempRowItem:"table-body__temp-item",classColumn:"table-body__column",classLabelColumn:"table-body__lable",classContentBlock:"table-body__content",classInputBlock:"table-body__input-value",classStaticBlock:"table-body__statick-value","classSystemBlockСapture":"table-body__capture",classSystemBlockActionButton:"table-body__actions-button",classSystemBlockActionList:"table-body__actions-list",classSystemBlockActionItem:"table-body__actions-item",classDragHover:"drag-hover",classDragOverlay:"overlay-on",classDragBefore:"insert-before",classDragAfter:"insert-after",classDragDraggrable:"draggrable"}),this.newRow={},this.newRow.isNewRow=!1,this.newRow.idNewRow=null,this.newRow.objectNewRow={},this.node={},this.dragRow=!1,this.dragCurentIndex=void 0,this.data={},this.data.rows={},this.data.columns={},this.handlerRowMouseEnter=this.handlerRowMouseEnter.bind(this),this.handlerRowDragEnd=this.handlerRowDragEnd.bind(this),this.handlerActionRemoveRow=this.handlerActionRemoveRow.bind(this),this.addNewRows=this.addNewRows.bind(this),this.saveChangeRows=this.saveChangeRows.bind(this),this.removeRow=this.removeRow.bind(this),this.createInputBlock=this.createInputBlock.bind(this)}var e,t,n;return e=l,(t=[{key:"render",value:function(){this.init(),this.checkDataRows()&&this.checkDataColumns()&&this.checkParent()&&this.update()}},{key:"update",value:function(){this.сlearParentBlock(),this.create(),this.renderResult()}},{key:"init",value:function(){this.data.rows=this.getDataProducts(),this.data.columns=this.getOptionDataTable()}},{key:"checkParent",value:function(){return!!(this.parentBlock&&this.parentBlock instanceof HTMLElement)}},{key:"checkDataRows",value:function(){return!(!Array.isArray(this.getDataProducts())||0===this.getDataProducts().length)}},{key:"checkDataColumns",value:function(){return!(!Array.isArray(this.getOptionDataTable())||0===this.getOptionDataTable().length)}},{key:"checkValueRows",value:function(){return!0}},{key:"сlearParentBlock",value:function(){this.parentBlock.hasChildNodes()&&(this.parentBlock.innerHTML="")}},{key:"create",value:function(){for(var p=this,t=this.parentBlock,n=this.data.rows,a=this.data.columns,e=this.options,r=e.classRow,f=e.classColumn,m=e.classContentBlock,y=e.classLabelColumn,i=Math.min(n.length,this.options.maxRows),o=0,s=function(){var c,u=n[l],d=u.id,e=u.isDeleted,h=o;e||((e=document.createElement("tr")).className=r,"desktop"===p.getMediaQuery()&&(e.draggable=!1,e.ondragstart=function(e){p.handlerRowDragStart(e,d)},e.ondragend=function(e){p.handlerRowDragEnd(e)},e.ondragover=function(e){p.handlerRowDragOver(e,d)},e.ondragenter=function(e){p.handlerRowDragEnter(e,d)},e.ondragleave=function(e){p.handlerRowDragLeave(e)},e.ondrop=function(e){p.handlerRowDrop(e,d)}),c=document.createDocumentFragment(),a.forEach(function(e,t,n){var a=e.key,r=e.type,e=e.columnOptions,i=e.lable,o=e.isAutocomplete,s=e.isDisplay,l=e.isEditable,e=e.mediaQuery;s&&!!e.includes(p.getMediaQuery())&&((s=document.createElement("td")).className=f,e=!(s.style.position="relative"),t===n.length-1&&(e=!0),t="",(n=document.createElement("div")).className=m,n.style.overflow="hidden",s.appendChild(n),"DATA"===r&&{}.hasOwnProperty.call(u,a)&&(t=String(u[a]),l?((l=p.createInputBlock(t,d,a,o)).dataset.dataId="".concat(a,"-").concat(d),n.appendChild(l)):(o=p.createStaticBlock(t),n.appendChild(o))),"SYSTEM"===r&&("index"===a&&(l=p.createSystemBlockСapture(),n.appendChild(l),t=p.createStaticBlock("".concat(h+1)),n.appendChild(t)),"action"===a)&&(o=p.createSystemBlockAction(d),n.style.overflow="visible",n.appendChild(o)),"desktop"!==p.getMediaQuery()&&((r=document.createElement("div")).className=y,r.innerHTML=i,c.appendChild(r)),c.appendChild(s),e)&&"desktop"===p.getMediaQuery()&&((l=document.createElement("td")).style.width="auto",c.appendChild(l))}),o+=1,e.appendChild(c),t.appendChild(e))},l=0;l<i;l+=1)s()}},{key:"createInputBlock",value:function(e,n,a,t){var r=this,i=this.options.classInputBlock,o=this.data.rows,s=document.createElement("input");return s.type="cc-text",s.value=e,s.className=i,s.onchange=function(e){var t=[].findIndex.call(o,function(e){return e.id===n});o[t][a]=e.target.value,r.setDataProducts(r.data.rows),r.setIsNewData(!0),r.renderResult()},t&&(e=[].map.call(o,function(e){return e[a]}),(0,c.default)(s,e)),s}},{key:"createStaticBlock",value:function(e){var t=this.options.classStaticBlock,n=document.createElement("div");return n.className=t,n.innerText=e,n}},{key:"createSystemBlockСapture",value:function(){var e=this.options.classSystemBlockСapture,t=document.createElement("div");return t.className=e,t.onmouseenter=this.handlerRowMouseEnter,t}},{key:"createSystemBlockAction",value:function(){var n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,e=this.options,t=e.classSystemBlockActionList,a=e.classSystemBlockActionItem,e=e.classSystemBlockActionButton;function r(){document.querySelectorAll("[data-action-menu]").forEach(function(e){e.style.display="none"})}function i(){r(),document.removeEventListener("click",i)}var o=document.createElement("div"),s=(o.className=e,o.style.position="relative",o.onclick=function(e){e.stopPropagation(),r(),(e=e.target.firstElementChild||e.target.firstChild)&&"UL"===e.tagName&&("none"===e.style.display?(e.style.display="",document.addEventListener("click",i)):(e.style.display="none",document.removeEventListener("click",i)))},document.createElement("ul")),e=(s.className=t,s.dataset.actionMenu="row",s.style.position="absolute",s.style.display="none",o.appendChild(s),[{name:"Удалить",action:this.handlerActionRemoveRow}]);return[].forEach.call(e,function(e){var t=document.createElement("li");t.className=a,t.innerText=e.name,t.dataset.dataId=n,t.onclick=e.action,s.appendChild(t)}),o}},{key:"createTempRow",value:function(){var e=this.options,t=e.classTempRow,e=e.classTempRowItem,n=document.createElement("tr"),t=(n.style.position="relative",n.className=t,n.dataset.tempRow="",document.createElement("div"));return t.className=e,n.appendChild(t),n}},{key:"removeTempRow",value:function(){document.querySelectorAll("[data-temp-row]").forEach(function(e){e.parentNode.removeChild(e)})}},{key:"removeRow",value:function(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;return(null!==t||"number"==typeof t)&&((e=this.data.rows)[[].findIndex.call(e,function(e){return e.id===t})].isDeleted=!0,this.setDataProducts(this.data.rows),this.render(),this.setIsNewData(!0),!0)}},{key:"addNewRows",value:function(){var n=this.data.rows,e=function e(t){return n.some(function(e){return e.id===t})?e(t+=1):0,t}(n.length+1),t=Object.keys(i({},n.slice(-1)[0])).reduce(function(e,t){return i(i({},e),{},o({},t,""))},{});return t.id=e,t.isDeleted=!1,this.newRow.isNewRow=!0,this.newRow.idNewRow=e,this.newRow.objectNewRow=i({},t),[].push.call(n,i({},t)),this.setDataProducts(this.data.rows),this.render(),this.setIsNewData(!0),!0}},{key:"saveChangeRows",value:function(){return!!this.checkValueRows()&&(this.newRow.isNewRow&&(this.newRow.isNewRow=!1,this.newRow.idNewRow=null,this.newRow.objectNewRow={}),this.setServerDataProducts(this.data.rows),!0)}},{key:"handlerActionRemoveRow",value:function(e){e.stopPropagation(),this.removeRow(Number(e.target.dataset.dataId))}},{key:"handlerRowMouseEnter",value:function(t){var n=t.target.closest("tr[draggable]");t.target.addEventListener("mouseleave",function e(){n.draggable=!1,t.target.removeEventListener("mouseleave",e)}),n.draggable=!0}},{key:"handlerRowDragStart",value:function(e,t){var n=this.options,a=n.classDragDraggrable,r=n.classDragOverlay;"TR"===e.target.tagName&&(setTimeout(function(){e.target.classList.add(a),e.target.style.opacity="0.3"},100),n=e.target.closest("tbody"),[].forEach.call(n.querySelectorAll("[draggable]"),function(e){e.classList.add(r)}),this.dragRow=!0,this.dragCurentIndex=t)}},{key:"handlerRowDragEnd",value:function(e){var t=this,n=this.options,a=n.classDragDraggrable,r=n.classDragOverlay;this.removeTempRow(),"TR"===e.target.tagName&&(n=e.target.closest("tbody"),[].forEach.call(n.querySelectorAll("[draggable]"),function(e){e.classList.remove(r)}),e.currentTarget.style.opacity="1",e.currentTarget.classList.remove(a),this.dropRow)&&(this.dragRow=!1,this.dragCurentIndex=null,setTimeout(function(){t.setDataProducts(t.data.rows),t.render()},0))}},{key:"handlerRowDragOver",value:function(e,t){var n,a=this;this.dragRow&&(n=this.data.rows,e.dataTransfer.dropEffect="move",[].findIndex.call(n,function(e){return e.id===t})!==[].findIndex.call(n,function(e){return e.id===a.dragCurentIndex}))&&e.preventDefault()}},{key:"handlerRowDragEnter",value:function(e,t){var n,a,r,i,o,s=this;this.removeTempRow(),this.dragRow&&(i=this.data.rows,r=(a=this.options).classDragHover,n=a.classDragBefore,a=a.classDragAfter,e.currentTarget.classList.add(r),(r=[].findIndex.call(i,function(e){return e.id===t}))!==(i=[].findIndex.call(i,function(e){return e.id===s.dragCurentIndex})))&&(o=this.createTempRow(),r<i&&(e.currentTarget.classList.add(n),e.currentTarget.parentNode.insertBefore(o,e.currentTarget)),i<r)&&(e.currentTarget.classList.add(a),e.currentTarget.parentNode.insertBefore(o,e.currentTarget.nextSibling))}},{key:"handlerRowDragLeave",value:function(e){var t,n,a;this.dragRow&&(t=(a=this.options).classDragHover,n=a.classDragBefore,a=a.classDragAfter,e.currentTarget.classList.remove(t),e.currentTarget.classList.remove(n),e.currentTarget.classList.remove(a))}},{key:"handlerRowDrop",value:function(e,t){var n,a,r,i=this;e.preventDefault(),this.dragRow&&(n=(r=this.options).classDragHover,a=r.classDragBefore,r=r.classDragAfter,e.currentTarget.classList.remove(n),e.currentTarget.classList.remove(a),e.currentTarget.classList.remove(r),n=this.data.rows,a=[].findIndex.call(n,function(e){return e.id===t}),e=[].findIndex.call(n,function(e){return e.id===i.dragCurentIndex}),r=n.splice(e,1)[0],n.splice(a,0,r),this.dropRow=!0,this.setIsNewData(!0))}},{key:"destroy",value:function(){}}])&&s(e.prototype,t),n&&s(e,n),Object.defineProperty(e,"prototype",{writable:!1}),l}();n.default=e},{"../helpers/autocomplete":3}],10:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!==r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===r(e)?e:String(e)}(a.key),a)}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=function(){function i(e){if(!(this instanceof i))throw new TypeError("Cannot call a class as a function");var t=e.parentBlock,n=e.createNewRows,a=e.saveChanges,r=e.getIsNewData,e=e.getMediaQuery;Object.assign(this,{parentBlock:t,createNewRows:n,saveChanges:a,getIsNewData:r,getMediaQuery:e}),this.options=Object.assign({classParent:"tools-table",classButtonAddRow:"tools-table__add-row button-primary button-primary--simple",classButtonSave:"tools-table__save-change button-primary button-primary--accept","classButtonСancel":"tools-table__сancel-change",textButtonAddRow:"Добавить строку",textButtonSave:"Сохранить"}),this.node={},this.handlerClickAddRowButton=this.handlerClickAddRowButton.bind(this),this.handlerClickSaveButton=this.handlerClickSaveButton.bind(this)}var e,t,n;return e=i,(t=[{key:"render",value:function(){var e,t;this.checkParent()&&(e=this.parentBlock,t=this.options.classParent,e.classList.add(t),this.сlearParentBlock(),this.createButtonAddRow(),this.getIsNewData())&&this.createButtonSave()}},{key:"checkParent",value:function(){return!!(this.parentBlock&&this.parentBlock instanceof HTMLElement)}},{key:"сlearParentBlock",value:function(){this.parentBlock.hasChildNodes()&&(this.parentBlock.innerHTML="")}},{key:"createButtonAddRow",value:function(){var e=this,t=this.parentBlock,n=this.options,a=n.classButtonAddRow,n=n.textButtonAddRow,r=document.createElement("button");r.className=a,r.innerText=n,t.appendChild(r),setTimeout(function(){r.addEventListener("click",e.handlerClickAddRowButton)},0)}},{key:"createButtonSave",value:function(){var e=this,t=this.parentBlock,n=this.options,a=n.classButtonSave,n=n.textButtonSave,r=document.createElement("button");r.className=a,r.innerText=n,t.appendChild(r),setTimeout(function(){r.addEventListener("click",e.handlerClickSaveButton)},0)}},{key:"handlerClickAddRowButton",value:function(){this.createNewRows()}},{key:"handlerClickSaveButton",value:function(){this.saveChanges()}},{key:"destroy",value:function(){}}])&&a(e.prototype,t),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();n.default=i},{}],11:[function(e,t,n){"use strict";var a=(e=e("./core"))&&e.__esModule?e:{default:e};document.addEventListener("DOMContentLoaded",function(){new a.default})},{"./core":2}],12:[function(e,t,n){"use strict";e("./components/modules/table/scripts/table")},{"./components/modules/table/scripts/table":11}]},{},[12]);